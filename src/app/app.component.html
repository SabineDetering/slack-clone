<mat-toolbar color="primary">
  <div class="left-part">
    <button mat-icon-button (click)="sidenav.toggle()">
      <mat-icon>menu</mat-icon>
    </button>
    <a [routerLink]="['login']"> Slacky</a>
  </div>

  <div class="avatar-with-btn">
    <ngx-auth-firebaseui-avatar
      [canLogout]="true"
      [canViewAccount]="true"
      [canDeleteAccount]="true"
      [canEditAccount]="true"     
    ></ngx-auth-firebaseui-avatar>
    <button *ngIf="Auth.authenticated" mat-icon-button class="edit-btn" matTooltip="change avatar"  (click)="openAvatarDialog()">
      <mat-icon class="edit-icon">edit</mat-icon>
    </button>
  </div>
</mat-toolbar>

<!-- mobile view: sidenav closed by default, open in mode 'over' with backdrop, closes on click on sidenav (or menu button) -->
<!-- desktop view: sidenav open by default in mode 'side'-->
<mat-sidenav-container [hasBackdrop]="mobileQuery.matches">
  <mat-sidenav
    mode="side"
    #sidenav
    [mode]="mobileQuery.matches ? 'over' : 'side'"
    [opened]="!mobileQuery.matches"
    (click)="mobileQuery.matches ? sidenav.toggle() : null"
  >
    <div class="sidenav-wrapper">
      <div *ngIf="Auth.authenticated">
        <app-channel-list [mobile]="mobileQuery.matches"></app-channel-list>
        <app-direct-channel-list></app-direct-channel-list>
      </div>
      <mat-nav-list class="legal-list">
        <a list-item [routerLink]="['legal-notice']"> Legal Notice </a> 
        <a list-item [routerLink]="['privacy-notice']"> Privacy Notice </a>
      </mat-nav-list>
    </div>
  </mat-sidenav>

  <mat-sidenav-content>
    <div class="outlet-main">
      <router-outlet> </router-outlet>
    </div>
    <!-- <div class="outlet-thread">
      <router-outlet name="thread"></router-outlet>
    </div> -->
    <app-thread-container
      *ngIf="currentMessages.length > 0"
    ></app-thread-container>
  </mat-sidenav-content>
</mat-sidenav-container>
